<?php
if ($_SERVER['REQUEST_METHOD'] == "POST") {

    require 'PHPMailer/PHPMailerAutoload.php';


    //escape all $_POST vars
    foreach ($_POST as $key => $value) {
        if (is_array($value)) {
            foreach ($value as $key2 => $value2) {
                $_POST[$key][$key2] = htmlspecialchars($value2);
            }
        } else {
            $_POST[$key] = htmlspecialchars($value);
        }
    }

    //mkdir for project
    //mkdir("/var/www/files/printing/$project-name/", 0775);

    //zip files together
    $fileName = md5(microtime());

    $file = "/var/www/files/printing/$fileName.zip";


    $zip = new ZipArchive();
    $zip->open($file, ZipArchive::CREATE);

    $files = false;
    $fileError = false;



    for ($i = 0; $i < count($_FILES['file']['name']); $i++) {
        if ($_FILES['file']['error'][$i] == 0 || $_FILES['file']['error'][$i] == 4) {
            if ($_FILES['file']['error'][$i] == 0) {
                $zip->addFile($_FILES['file']['tmp_name'][$i], $_FILES['file']['name'][$i]);
                $files = true;
            }
        } else {
            $fileError = true;
        }
    }


    $res = $zip->close();

    $size = filesize($file);
    if ($size > 25000000) {
        $sizeError = true;
    }

    if ($fileError || $sizeError) {
        header("Location: thankyou.php?error=true");
        exit;
    } else {

        $subject = "Printing Request Form " . $_POST['name'];

        $body = "<head><link rel = 'stylesheet' type = 'text/css' href = '/var/www/html/printing-request/css/forms.css' /></head><style>.inset {margin-left:30px;}</style>" .
                "<strong><em><u>Name</u></em></strong>: " . $_POST['name'] . "<br>" .
                "<strong><em><u>Email</u></em></strong>: " . $_POST['email'] . "<br>" .
                "<strong><em><u>Extension</u></em></strong>: " . $_POST['extension'] . "<br>" .
                "<strong><em><u>Department</u></em></strong>: " . $_POST['department'] . "<br>" .
                "<strong><em><u>Campus</u></em></strong>: " . $_POST['campus'] . "<br>" .
                "<strong><em><u>Commercial Project</u></em></strong>: " . $_POST['commercial-project'] . "<br>" .
                "<strong><em><u>Shipping Address</u></em></strong>: " . $_POST['shipping-address'] . "<br>" .
                "<strong><em><u>Billing Address</u></em></strong>: " . $_POST['billing-addreess'] . "<br>" .
                "<strong><em><u>Billing Address</u></em></strong>: " . $_POST['commercial-phone-number'] . "<br>" .
                "<strong><em><u>Delivery | Pickup</u></em></strong>: " . $_POST['delivery-pickup'] . "<br>" .
                "<br>" .
                "<strong><em><u>Project Name</u></em></strong>: " . $_POST['project-name'] . "<br>" .
                "<strong><em><u>Date Needed</u></em></strong>: " . $_POST['date'] . "<br>" .
                "<strong><em><u>Job Type</u></em></strong>: " . $_POST['job'] . "<br>" .
                "<strong><em><u>Quantity</u></em></strong>: " . $_POST['quantity'] . "<br>" .
                "<br>" .
                "<strong><em><u>Project Type</u></em></strong>: <br>";

        foreach ($_POST['type'] as $type) {
            switch ($type) {
                case "project": {
                        $body .= "
                    project<div class = 'inset' id='formBorder'><strong><em><u>project</u></em></strong><div class = 'inset'>" .
                                "<strong><em><u>project Color:</u></em></strong> " . $_POST['project-color'] . "<br>" .
                                "<strong><em><u>Print Size:</u></em></strong> " . $_POST['project-size'] . "<br>" .
                                "<strong><em><u>Paper:</u></em></strong> " . $_POST['project-paper'] . "<br>" .
                                "<strong><em><u>project Specifications:</u></em></strong> " . $_POST['project-specifications'] . "<br>" .
                                "</div></div>";
                    }
                    break;
                case "email-graphic":
                    $body .= "
                    Email graphic<div class = 'inset'>" .
                            "Size: " . $_POST['email-graphic-size'] . "<br>" .
                            "File Type: " . $_POST['email-graphic-type'] . "<br>" .
                            "Text: " . $_POST['email-graphic-text'] . "<br>" .
									"<strong><u>Email Graphic Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['eg-description'] . "<br>" .
											"College Goal: " . $_POST['eg-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['eg-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['eg-prospective-students'] . "<br>" .
											"Students: " . $_POST['eg-current-students'] . "<br>" .
											"Alumni: " . $_POST['eg-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['eg-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['eg-donors-friends'] . "<br>" .
											"Other: " . $_POST['eg-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['eg-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['eg-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['eg-project-outcomes'] . "<br>" .
                            "</div>";
                    break;
                case "popup":
                    $body .= "
                    Popup<div class = 'inset'>" .
                            "Size: " . $_POST['popup-size'] . "<br>" .
                            "File Type: " . $_POST['popup-text'] . "<br>" .
									"<strong><u>Popup Display Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['pd-description'] . "<br>" .
											"College Goal: " . $_POST['pd-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['pd-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['pd-prospective-students'] . "<br>" .
											"Students: " . $_POST['pd-current-students'] . "<br>" .
											"Alumni: " . $_POST['pd-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['pd-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['pd-donors-friends'] . "<br>" .
											"Other: " . $_POST['pd-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['pd-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['pd-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['pd-project-outcomes'] . "<br>" .
                            "</div>";
                    break;
                case "project":
                    $body .= "project<br>" .
									"<strong><u>project Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['br-description'] . "<br>" .
											"College Goal: " . $_POST['br-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['br-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['br-prospective-students'] . "<br>" .
											"Students: " . $_POST['br-current-students'] . "<br>" .
											"Alumni: " . $_POST['br-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['br-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['br-donors-friends'] . "<br>" .
											"Other: " . $_POST['br-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['br-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['br-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['br-project-outcomes'] . "<br>";
                    break;
                case "invitation":
                    $body .= "Invitation<br>" .
									"<strong><u>Invitation Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['in-description'] . "<br>" .
											"College Goal: " . $_POST['in-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['in-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['in-prospective-students'] . "<br>" .
											"Students: " . $_POST['in-current-students'] . "<br>" .
											"Alumni: " . $_POST['in-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['in-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['in-donors-friends'] . "<br>" .
											"Other: " . $_POST['in-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['in-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['in-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['in-project-outcomes'] . "<br>";
                    break;
                case "e-postcard":
                    $body .= "E-postcard<br>" .
									"<strong><u>E-Postcard Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['ep-description'] . "<br>" .
											"College Goal: " . $_POST['ep-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['ep-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['ep-prospective-students'] . "<br>" .
											"Students: " . $_POST['ep-current-students'] . "<br>" .
											"Alumni: " . $_POST['ep-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['ep-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['ep-donors-friends'] . "<br>" .
											"Other: " . $_POST['ep-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['ep-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['ep-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['ep-project-outcomes'] . "<br>";
                    break;
                case "program":
                    $body .= "Program<br>" .
									"<strong><u>Program Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['pr-description'] . "<br>" .
											"College Goal: " . $_POST['pr-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['pr-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['pr-prospective-students'] . "<br>" .
											"Students: " . $_POST['pr-current-students'] . "<br>" .
											"Alumni: " . $_POST['pr-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['pr-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['pr-donors-friends'] . "<br>" .
											"Other: " . $_POST['pr-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['pr-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['pr-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['pr-project-outcomes'] . "<br>";
                    break;
                case "publicity":
                    $body .= "
                    Publicity<div class = 'inset'>" .
                            "Reason: " . $_POST['publicity-what'] . "<br>" .
                            "Why newsworthy: " . $_POST['publicity-why'] . "<br>" .
                            "Date/Time: " . $_POST['publicity-date'] . "<br>" .
                            "Photographer: " . $_POST['publicity-photo'] . "<br>" .
									"<strong><u>Publicity Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['pu-description'] . "<br>" .
											"College Goal: " . $_POST['pu-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['pu-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['pu-prospective-students'] . "<br>" .
											"Students: " . $_POST['pu-current-students'] . "<br>" .
											"Alumni: " . $_POST['pu-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['pu-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['pu-donors-friends'] . "<br>" .
											"Other: " . $_POST['pu-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['pu-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['pu-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['pu-project-outcomes'] . "<br>" .
                            "</div>";
                    break;
                case "project-other":
                    $body .= "
                    Other<div class = 'inset'>" .
                            "Reason: " . $_POST['project-other-what'] . "<br>" .
                            "Why newsworthy: " . $_POST['project-other-why'] . "<br>" .
                            "Date/Time: " . $_POST['project-other-date'] . "<br>" .
                            "Photographer: " . $_POST['project-other-photo'] . "<br>" .
									"<strong><u>Other Creative Brief</u></strong>" . "<br>" .
										"<strong><em><u>Background</u></em></strong>" . "<br>" .
											"Description: " . $_POST['ot-description'] . "<br>" .
											"College Goal: " . $_POST['ot-goal'] . "<br>" .
										"<strong><em><u>Objective</u></em></strong>" . "<br>" .
											"Objective: " . $_POST['ot-objective'] . "<br>" .
										"<strong><em><u>Audience</u></em></strong>" . "<br>" .
											"Prospective Students: " . $_POST['ot-prospective-students'] . "<br>" .
											"Students: " . $_POST['ot-current-students'] . "<br>" .
											"Alumni: " . $_POST['ot-alumni'] . "<br>" .
											"Faculty and Staff: " . $_POST['ot-faculty-staff'] . "<br>" .
											"Donors/Friends: " . $_POST['ot-donors-friends'] . "<br>" .
											"Other: " . $_POST['ot-audience-other'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Recipient Thoughts: " . $_POST['ot-recipient-thoughts'] . "<br>" .
											"Call to Action: " . $_POST['ot-call-to-action'] . "<br>" .
										"<strong><em><u>Key Message</u></em></strong>" . "<br>" .
											"Outcomes: " . $_POST['ot-project-outcomes'] . "<br>" .
                            "</div>";
                    break;
                case "led":
                    $body .= "
                    LED<div class = 'inset'>" .
                            "Line One: " . $_POST['led-1'] . "<br>" .
                            "Line Two: " . $_POST['led-2'] . "<br>" .
                            "Line Three: " . $_POST['led-3'] . "<br>" .
                            "</div>";
                    break;
                case "web-graphic":
                    $body .= "Web graphic<br>";
                    break;
                case "banner":
                    $body .= "
                    Banner<div class = 'inset'>" .
                            "Size: " . $_POST['banner-size'] . "<br>" .
                            "File Type: " . $_POST['banner-text'] . "<br>" .
                            "</div>";
                    break;
                case "flyer":
                    $body .= "Flyer<br>";
                    break;
                case "logo":
                    $body .= "Logo<br>";
                    break;
                case "postcard":
                    $body .= "Postcard<br>";
                    break;
                case "other":
                    $body .= "
                    Other<div class = 'inset'>" .
                            "Description: " . $_POST['other-text'] . "<br>" .
                            "</div>";
                    break;
                case "printing":
                    $body .= "printing<br>";
                    break;
                case "research":
                    $body .= "
                    Research Poster<div class = 'inset'>" .
                            "Size: " . $_POST['research-size'] . "<br>" .
                            "</div>";
                    break;
            }



        }
        $body .= "<br>Proof to: " . $_POST['proof-to'] . "<br>" .
                "Proof type: " . $_POST['proof-type'] . "<br>" .
                "Deliver to: " . $_POST['deliver-to'] . "<br>" .
                "Instructions: " . $_POST['specific'] . "<br>";

        $mail = new PHPMailer();
        /* $mail->AddAddress('terrencehi@pcom.edu');
        $mail->AddAddress('pcomprintingservices@pcom.edu'); */
        $mail->AddAddress('kelleyco@pcom.edu');
        $mail->From = "no-reply@pcom.edu";
        $mail->FromName = "Printing Request";
        $mail->Sender = "no-reply@pcom.edu";
        $mail->Subject = $subject;
        $mail->Body = $body;
        $mail->isHTML(true);

        if ($files) {
            $mail->AddAttachment($file);
        }

        if (!$mail->send()) {
            echo 'An error has occurred.';
            echo 'Mailer Error: ' . $mail->ErrorInfo;
            exit;
        } else {
            file_put_contents("/var/www/files/printing/$fileName.html", $body);
        }

        $mail = new PHPMailer();
        $mail->AddAddress($_POST['email']);
        $mail->From = "no-reply@pcom.edu";
        $mail->FromName = "Printing Request";
        $mail->Sender = "no-reply@pcom.edu";
        $mail->Subject = 'Submission Confirmation';
        $mail->Body = 'Thank you for submitting your work request to Printed Solutions for approval. Your project will be reviewed. Should your project need additional information, we will contact you.
        <br><br>PCOM Office of Printed Solutions<br>
Philadelphia College of Osteopathic Medicine<br>
4180 City Avenue, Philadelphia PA 19131<br>
215-871-6300 - 215-871-6307 (fax)<br>
<a href="www.pcom.edu">pcom.edu</a>';
        $mail->isHTML(true);

        if (!$mail->send()) {
            echo 'An error has occurred.';
            echo 'Mailer Error: ' . $mail->ErrorInfo;
            exit;
        } else {

            header("Location: thankyou.php");
            exit;
        }
    }
}
?>

<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->

<?php require ('includes/header.php'); ?>

<!-- BEGIN REQUESTOR SECTION -->
    <div class="row">
    <div class="col-md-12">
        <form id="requestForm" enctype="multipart/form-data" method="post">
		  <div id="formBorder">
			<div class="alert alert-danger" role="alert" style="display: none" id="error-box">
				<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> There are errors on the page. Please review the items in red below.
			</div>
        <div style="margin-bottom: 10px">
		<legend><strong>Client Information</strong></legend>
		To complete your order, please provide the information for your project on the form below and click on the “Submit” button. If additional information is needed a representative will contact you.<br>
		<span class="required">*</span> indicates a required field
		</div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label" for="name">Name</label> <span class="required">*</span>
                        <input type="text" class="form-control" id="name" name="name">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label" for="email">Email</label> <span class="required">*</span>
                        <input type="email" class="form-control" id="email" name="email">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label heading" for="extension">Extension</label> <span class="required">*</span>
                        <input type="text" class="form-control" id="extension" name="extension">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label heading" for="department">Department and ORG Number</label> <span class="required">*</span>
                        <input type="text" class="form-control" id="department" name="department">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label heading">Location</label>
                <div class="radio" style="margin-top:0">
                    <label>
                        <input type="radio" name="campus" value="PCOM">
                        PCOM
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="campus" value="GA-PCOM">
                        GA-PCOM
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="campus" value="BOTH">
                        BOTH
                    </label>
                </div>
            </div>
            <div class="row">
            <div class="col-md-6">
            	<div class="form-group">           
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" name="commercial-project" id="commercial-project" value="yes">
                            Commercial Project
                        </label>
                    </div>
                        <div class="sub-options">
                            <div class="form-group">
                                <label for=department" class="control-label">Shipping Address</label>
                                <input type="text" class="form-control" id="shipping-address" name="shipping-address">
                                <label for="department" class="control-label">Billing Address</label>
                                <input type="text" class="form-control" id="billing-address" name="billing-address">
                                <label for="department" class="control-label">Phone Number</label>
                                <input type="text" class="form-control" id="comeercial-phone-number" name="comeercial-phone-number">
                            </div>
                            <div class="form-group">
                                <label class="control-label">Delivery | Pickup</label>
                                    <div class="radio" style="margin-top:0">
                                        <label>
                                            <input type="radio" name="delivery-pickup" value="Delivery">
                                             Delivery
                                        </label>
                                    </div>
                                    <div class="radio">
                                        <label>
                                            <input type="radio" name="delivery-pickup" value="Pickup">
                                            Pickup
                                        </label>
                                    </div>
                            </div>
                           </div>                           
                        </div>
                    </div>
                </div>
		    </div>
		    
		</div>
	</div>
<!-- END REQUESTOR SECTION -->

<!-- BEGIN PROJECT INFORMATION SECTION -->
 		<div  id="formBorder">
            <div class="row">
                <div class="col-md-6">
            			<legend><strong>Specific Project Information</strong></legend>
                    <div class="form-group">
                       	<label for="project-name" class="control-label heading">Name of project</label> <span class="required">*</span>
                       	<input type="text" class="form-control" id="project-name" name="project-name">
                    </div>
                </div>
            </div>
            <div class="row">            

                <div class="col-md-3">
                    <div class="form-group">
                        <label class="control-label heading">Job Type</label>
                        <div class="radio" style="margin-top:0">
                            <label>
                                <input type="radio" name="job" value="New Job">
                                New Job
                            </label>
                        </div>
                        <div class="radio" style="margin-top:0">
                            <label>
                                <input type="radio" name="job" value="Repeat Order No Changes">
                                Repeat Order | No Changes
                            </label>
                        </div>
                        <div class="radio" style="margin-bottom: 10px;">
                            <label>
                                <input type="radio" name="job" value="Repeat Order Changes">
                                Repeat Order | Changes Requested
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <div class="form-group date">
                        <label for="date" class="control-label heading">Delivery&nbsp;Date</label><span class="required">&nbsp;*&nbsp;</span>
                        <div class="input-group date">
                            <input type="text" class="form-control form-control-inline" id="date" name="date" readonly="readonly" value="mm/dd/yyy"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-md-offset-1">
                    <div class="form-group">
                        <label for="quantity" class="control-label heading">Quantity</label><span class="required">&nbsp;*</span></br>
                        <input type="number" class="form-control form-control-inline" id="quantity" name="quantity">
                    </div>
                </div>
            </div>
<!-- START TYPES OF PROJECTS-->
    <div class="row">
        <div class="col-md-7">
            <div class="form-group">
                <label class="heading control-label">Type of Project (check all that apply)</label>
                        <div class="checkbox" style="margin-top:0">
                            <label>
                                <input type="checkbox" name="type[]" id="project" value="project">
                                Project Details
                            </label>
						</div>
                        <div class="sub-options">
                            <div class="form-group">
        						<div class="alert alert-info" role="alert">
        							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
       								Attach final approved content below
        						</div>
                                <div class="checkbox">
                                    &nbsp;
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <label class="control-label">Color | Black and White</label>
                                        <div class="radio" style="margin-top:0">
                                            <label>
                                                <input type="radio" name="project-color" value="Full-color">
                                                Full-color
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="project-color" value="Black and white">
                                                Black and white
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="project-size" class="control-label">Final Finish Size of Project (enter size of card, book, letter, etc.)</label>
                                        <input type="text" class="form-control" id="project-size" name="project-size">
                                    </div>
                                    <div class="form-group">
                                        <label for="project-paper" class="control-label"><strong><u>PAPER</u>:</strong> Weight, Color, Type</label>
										<textarea class="form-control" id="project-paper" name="project-paper"></textarea>
										<p>(Example 20lb text, #80 cover, coated sheet dull or gloss coating, etc</span></p>
                                    </div>                                    
                                    <div class="form-group">
                                        <label for="project-specifications" class="control-label"><strong><u>ADDITIONAL DETAILS</u>:</strong></label>
										<span><p>PLEASE PROVIDE ADDITIONAL DETAILS ABOUT YOUR PROJECT BELOW</span></p>                                        
										<textarea class="form-control" id="project-specifications" name="project-specifications"></textarea>
										<span><p>(Ink colors, fold, collate, stitch trim, drill, pad. Wrap, laminate, Digital signage request, mounted poster)</span></p>
                                    </div>
                                    <div class="form-group">
                                        <label for="mailing-services" class="control-label"><strong><u>MAILING SERVICES DETAILS</u>:</strong></label>
										<span><p>PLEASE PROVIDE DETAILS ABOUT MAILING SERVICES BELOW</span></p>                                        
										<textarea class="form-control" id="mailing-services" name="mailing-services"></textarea>
										<span><p>(INSERT DESCRIPTION HERE)</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
		            </div>
                </div>
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group" id="file-group">
                            <label for="file" class="control-label heading">Attach files and photos here <br>(limit 5 MB per file, 20 MB total)</label>
                            <div class="fileinput fileinput-new input-group" data-provides="fileinput">
                                <div class="form-control" data-trigger="fileinput"><i class="glyphicon glyphicon-file fileinput-exists"></i> <span class="fileinput-filename"></span></div>
                                <span class="input-group-addon btn btn-default btn-file"><span class="fileinput-new">Select file</span><span class="fileinput-exists">Change</span><input type="file" name="file[]"></span>
                                <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
                            </div>
                            <div class="fileinput fileinput-new input-group" data-provides="fileinput">
                                <div class="form-control" data-trigger="fileinput"><i class="glyphicon glyphicon-file fileinput-exists"></i> <span class="fileinput-filename"></span></div>
                                <span class="input-group-addon btn btn-default btn-file"><span class="fileinput-new">Select file</span><span class="fileinput-exists">Change</span><input type="file" name="file[]"></span>
                                <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
                            </div>
                            <button type="button" class="btn btn-default" id="add-file" style="margin-bottom: 15px;">
                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add another file
                            </button>
                        </div>
                    </div>
                </div>
            </div>

		</div>
	<div>
</div>
<!-- END TYPES OF PROJECTS -->
<!-- END PROJECT INFORMATION SECTION -->

<!-- BEGIN PROOFING AND DELIVERY SECTION -->
<div id="formBorder">
            <legend><strong>Proofing and Delivery</strong></legend>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label" for="proof-to">Send proof to</label> <span class="required">*</span>
                        <input type="text" class="form-control" id="proof-to" name="proof-to">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="deliver-to"  class="control-label heading">Deliver final product to</label> <span class="required">*</span>
                        <textarea class="form-control" id="deliver-to" name="deliver-to"></textarea>
                    </div>
						<p>All questions pertaining to filling out the online work request should be submitted to Printing Solutions at Ext.6770.</p>
            		<div class="form-group">
                		<button type="submit" value="Validate!" class="btn btn-primary">Submit</button>
            		</div>
            	</div>
            </div>
</div>
        <!-- </form> -->
<!-- END PROOFING AND DELIVERY SECTION -->
<!--
	</div>
</div>
-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/1.4.14/jquery.scrollTo.min.js"></script>
<script src="http://cdn.jsdelivr.net/jquery.validation/1.15.0/jquery.validate.min.js"></script>
<script src="http://cdn.jsdelivr.net/jquery.validation/1.15.0/additional-methods.min.js"></script>
<script>
    $("input[type=checkbox]").click(function () {
        $(this).parents("div").next(".sub-options").toggle("fast");
    });

    $("input[name=printing]").click(function () {
        if ($(this).val() == 'Yes') {
            var date = getFirstAvail(20);
            $("#date").val('');
        } else {
            var date = getFirstAvail(10);
        }
        $('.date').datepicker('setStartDate', date);
    });

    $("#add-file").click(function () {
        var text = '\
        <div class="fileinput fileinput-new input-group" data-provides="fileinput">\
        <div class="form-control" data-trigger="fileinput"><i class="glyphicon glyphicon-file fileinput-exists"></i> <span class="fileinput-filename"></span></div>\
        <span class="input-group-addon btn btn-default btn-file"><span class="fileinput-new">Select file</span><span class="fileinput-exists">Change</span><input type="file" name="file[]"></span>\
        <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>\
        </div>';
        $(text).insertBefore($(this));
    });


    function getFirstAvail(days) {
        var date = new Date();
        i = 0;
        while (i < days) {
            date.setDate(date.getDate() + 1);
            if (date.getDay() != 0 && date.getDay() != 6) {
                i++;
            }
        }
        return date;
    }


    $('.date').datepicker({
        startDate: getFirstAvail(10),
        daysOfWeekDisabled: "0,6",
        autoclose: true,
        todayHighlight: true,
        beforeShowDay: function (date) {
        }
    });

    $("form").submit(function () {
        var error = false;
        //clear all errors
        $(".form-group").removeClass('has-error');
        $("#error-box").hide();
        //check text fields
        var fields = ['name', 'email', 'extension', 'department', 'date', 'quantity', 'proof-to', 'deliver-to', 'project-name'];
        for (key in fields) {
            if (!$("#" + fields[key]).val()) {
                $("#" + fields[key]).parents('.form-group').addClass('has-error');
                error = true;
            }
        }
        //check radios and checkboxs
        var nameFields = ['type[]', 'proof-type'];
        for (key in nameFields) {
            if (!$("input[name='" + nameFields[key] + "']:checked").val()) {
                $("input[name='" + nameFields[key] + "']").parents('.form-group').addClass('has-error');
                error = true;
            }
        }
        //check fields that require a file
        var fileFields = ['project', 'flyer', 'invitation', 'postcard', 'e-postcard', 'program', 'research-faculty'];
        for (key in fileFields) {
            if ($("#" + fileFields[key] + ":checked").val()) {
                var files = false;
                $("input[name='file[]']").each(function () {
                    if ($(this).val()) {
                        files = true;
                    }
                });
                if (!files) {
                    $("#file-group").addClass('has-error');
                    error = true;
                }
            }
        }

        //nested fields
        if ($("#advertising").prop("checked")) {
            if (!($("#advertising-print").prop("checked") || $("#advertising-online").prop("checked"))) {
                $("#advertising-print").closest('.form-group').addClass('has-error');
                error = true;
            } else {
                if ($("#advertising-print").prop("checked")) {
                    if (!$("input[name='advertising-print-color']:checked").val()) {
                        $("input[name='advertising-print-color']").closest('.form-group').addClass('has-error');
                        error = true;
                    }
                    if (!$("#advertising-print-size").val()) {
                        $("#advertising-print-size").closest('.form-group').addClass('has-error');
                        error = true;
                    }
                }
                if ($("#advertising-online").prop("checked")) {
                    if (!$("input[name='advertising-online-color']:checked").val()) {
                        $("input[name='advertising-online-color']").closest('.form-group').addClass('has-error');
                        error = true;
                    }
                    if (!$("#advertising-online-size").val()) {
                        $("#advertising-online-size").closest('.form-group').addClass('has-error');
                        error = true;
                    }
                }
            }
        }
        if ($("#email-graphic").prop("checked")) {
            if (!$("#email-graphic-size").val()) {
                $("#email-graphic-size").closest('.form-group').addClass('has-error');
            }
            if (!$("#email-graphic-type").val()) {
                $("#email-graphic-type").closest('.form-group').addClass('has-error');
            }
            if (!$("#email-graphic-text").val()) {
                $("#email-graphic-size").closest('.form-group').addClass('has-error');
            }
        }
        if ($("#led").prop("checked")) {
            if (!$("#led-1").val()) {
                $("#led-1").closest('.form-group').addClass('has-error');
            }
        }
        if ($("#banner").prop("checked")) {
            if (!$("#banner-size").val()) {
                $("#banner-size").closest('.form-group').addClass('has-error');
            }
            if (!$("#banner-text").val()) {
                $("#banner-text").closest('.form-group').addClass('has-error');
            }
        }
        if ($("#other").prop("checked")) {
            if (!$("#other-text").val()) {
                $("#other-text").closest('.form-group').addClass('has-error');
            }
        }
        if ($("#publicity").prop("checked")) {
            if (!$("#publicity-what").val()) {
                $("#publicity-what").closest('.form-group').addClass('has-error');
            }
            if (!$("#publicity-why").val()) {
                $("#publicity-why").closest('.form-group').addClass('has-error');
            }
        }
        if ($("#research").prop("checked")) {
            if (!$("#research-faculty:checked").val()) {
                $("#research-faculty").closest('.form-group').addClass('has-error');
            } else if (!$("#research-size").val()) {
                $("#research-size").closest('.form-group').addClass('has-error');
            }
            if ($("#research-student:checked").val()) {
                $("#research-student").closest('.form-group').addClass('has-error');
            }
        }
        //check file sizes
        /*$("input[name='file[]']").each(function () {
         if ($(this).val()) {
         alert($(this)[0].files[0].size);
         }
         });*/
        if ($(".form-group").hasClass('has-error')) {
            $("#error-box").show();
            $("body").scrollTo("#error-box");
            return false;
        }
    });

</script>

<?php require ('includes/footer.php'); ?>